import{T as W,S as k,n as z,O as E,W as T,b as x,k as C,d as G,e as L,m as P}from"./three.module-Ci49G_j_.js";import{G as B}from"./GLTFLoader-DqLJsSBL.js";function R(e,t,l){return(1-l)*e+l*t}function j(e,t,l){return(l-e)/(t-e)}function v(e,t,l){return Math.min(Math.max(e,t),l)}function F(){return Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)}function O(){return window.scrollY/(F()-window.innerHeight)}function Y(e,t,l,d,n=0,i=0){let w=d.position.y+window.innerHeight/2,s=e.max.z*(t.y+n)+l.y+i,_=e.min.z*(t.y+n)+l.y+i-window.innerHeight;return j(s,_,w)}console.log(W);let y=new k;y.background=new z(1,1,1);let r=new E(window.innerWidth/-2,window.innerWidth/2,window.innerHeight/2,window.innerHeight/-2,.1,1e3);r.position.z=5;let M=0,S=0,p=new T;p.setSize(window.innerWidth,window.innerHeight);document.body.appendChild(p.domElement);let A=new B,m=null,a=[],H=1,g=0,h=0,u=null,c=[];A.load("./page_3/page_3_layout.glb",function(e){let t=e.scene.children;for(let d=0;d<t.length;d++){let n=t[d];if(console.log(n),n.material!==void 0){let i=new x({map:n.material.map,transparent:!0});n.material=i}switch(n.name){case"start":M=n.position.y;break;case"bubble_0":m=n,m.scale.z*=-1,a[0]!==void 0&&(m.material.map=a[0]);break;case"panel_0":u=n,u.scale.z*=-1,c[0]!==void 0&&(u.material.map=c[0]);break;case"end":S=n.position.y;break}}let l=new x({color:65280});e.scene.children[0].material=l,y.add(e.scene)});let b=new C;a.push(b.load("page_3/bubble_0/bubble_0_0000.png",function(e){}));a.push(b.load("page_3/bubble_0/bubble_0_0001.png",function(e){}));a.push(b.load("page_3/bubble_0/bubble_0_0002.png",function(e){}));a.push(b.load("page_3/bubble_0/bubble_0_0003.png",function(e){}));for(let e=0;e<=16;e++)c.push(b.load("page_3/panel_0/panel_0_00"+(e>9?e:"0"+e)+".png",function(t){t.colorSpace=G,p.initTexture(t),console.log(t)}));function D(e){console.log("here"),r.left=window.innerWidth/-2,r.right=window.innerWidth/2,r.top=window.innerHeight/2,r.bottom=window.innerHeight/-2,r.aspect=window.innerWidth/window.innerHeight,r.updateProjectionMatrix(),p.setSize(window.innerWidth,window.innerHeight)}let f=[],I=new P(!0);function N(){let e=I.getDelta(),t=O(),l=R(M,S,t);if(r.position.y=l,m!==null&&a.length!==0&&(g+=e,g>H)){for(h++,h>=a.length&&(h=0);g>H;)g-=H;m.material.map=a[h]}if(u!==null&&c.length!==0){let n=Y(u.geometry.boundingBox,u.scale,u.position,r,-600,800),i=v(Math.round(n*c.length),0,c.length-1);u.material.map=c[i]}let d=navigator.getGamepads();for(let n=0;n<d.length;n++){let i=d[n];if(i!==null){let w=i.axes[0],s=-i.axes[1],_=new L(w,s);new L(w,s).normalize().multiplyScalar(_.length()),s*s>.05&&(console.log(s),window.scrollBy(0,-s*5));for(let o=0;o<i.buttons.length;o++)i.buttons[o].pressed&&console.log(o),f[o]!==void 0&&f[o]&&(f[o],i.buttons[o].pressed);i.buttons[4].pressed&&(window.location.href="page_2.html");for(let o=0;o<i.buttons.length;o++)f[o]=i.buttons[o].pressed}}p.render(y,r)}window.addEventListener("resize",D);p.setAnimationLoop(N);
