import{E as D,V as _,a as C,M as w,Q as k,T as S,S as F,P as T,W as R,C as q,R as A,B as H,b as y,c as z,d as W}from"./three.module-BAsInonW.js";const a=new D(0,0,0,"YXZ"),c=new _,X={type:"change"},Y={type:"lock"},I={type:"unlock"},P=Math.PI/2;class Q extends C{constructor(o,e){super(),this.camera=o,this.domElement=e,this.isLocked=!1,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.pointerSpeed=1,this._onMouseMove=V.bind(this),this._onPointerlockChange=B.bind(this),this._onPointerlockError=U.bind(this),this.connect()}connect(){this.domElement.ownerDocument.addEventListener("mousemove",this._onMouseMove),this.domElement.ownerDocument.addEventListener("pointerlockchange",this._onPointerlockChange),this.domElement.ownerDocument.addEventListener("pointerlockerror",this._onPointerlockError)}disconnect(){this.domElement.ownerDocument.removeEventListener("mousemove",this._onMouseMove),this.domElement.ownerDocument.removeEventListener("pointerlockchange",this._onPointerlockChange),this.domElement.ownerDocument.removeEventListener("pointerlockerror",this._onPointerlockError)}dispose(){this.disconnect()}getObject(){return this.camera}getDirection(o){return o.set(0,0,-1).applyQuaternion(this.camera.quaternion)}moveForward(o){const e=this.camera;c.setFromMatrixColumn(e.matrix,0),c.crossVectors(e.up,c),e.position.addScaledVector(c,o)}moveRight(o){const e=this.camera;c.setFromMatrixColumn(e.matrix,0),e.position.addScaledVector(c,o)}lock(){this.domElement.requestPointerLock()}unlock(){this.domElement.ownerDocument.exitPointerLock()}}function V(n){if(this.isLocked===!1)return;const o=n.movementX||n.mozMovementX||n.webkitMovementX||0,e=n.movementY||n.mozMovementY||n.webkitMovementY||0,h=this.camera;a.setFromQuaternion(h.quaternion),a.y-=o*.002*this.pointerSpeed,a.x-=e*.002*this.pointerSpeed,a.x=Math.max(P-this.maxPolarAngle,Math.min(P-this.minPolarAngle,a.x)),h.quaternion.setFromEuler(a),this.dispatchEvent(X)}function B(){this.domElement.ownerDocument.pointerLockElement===this.domElement?(this.dispatchEvent(Y),this.isLocked=!0):(this.dispatchEvent(I),this.isLocked=!1)}function U(){console.error("THREE.PointerLockControls: Unable to use Pointer Lock API")}const Z=new _(0,0,1),M=new D,G=new k,$=new k(-Math.sqrt(.5),0,0,Math.sqrt(.5)),J={type:"change"};class K extends C{constructor(o){super(),window.isSecureContext===!1&&console.error("THREE.DeviceOrientationControls: DeviceOrientationEvent is only available in secure contexts (https)");const e=this,h=1e-6,L=new k;this.object=o,this.object.rotation.reorder("YXZ"),this.enabled=!0,this.deviceOrientation={},this.screenOrientation=0,this.alphaOffset=0;const v=function(t){e.deviceOrientation=t},u=function(){e.screenOrientation=window.orientation||0},j=function(t,p,E,f,g){M.set(E,p,-f,"YXZ"),t.setFromEuler(M),t.multiply($),t.multiply(G.setFromAxisAngle(Z,-g))};this.connect=function(){u(),window.DeviceOrientationEvent!==void 0&&typeof window.DeviceOrientationEvent.requestPermission=="function"?window.DeviceOrientationEvent.requestPermission().then(function(t){t=="granted"&&(window.addEventListener("orientationchange",u),window.addEventListener("deviceorientation",v))}).catch(function(t){console.error("THREE.DeviceOrientationControls: Unable to use DeviceOrientation API:",t)}):(window.addEventListener("orientationchange",u),window.addEventListener("deviceorientation",v)),e.enabled=!0},this.disconnect=function(){window.removeEventListener("orientationchange",u),window.removeEventListener("deviceorientation",v),e.enabled=!1},this.update=function(){if(e.enabled===!1)return;const t=e.deviceOrientation;if(t){const p=t.alpha?w.degToRad(t.alpha)+e.alphaOffset:0,E=t.beta?w.degToRad(t.beta):0,f=t.gamma?w.degToRad(t.gamma):0,g=e.screenOrientation?w.degToRad(e.screenOrientation):0;j(e.object.quaternion,p,E,f,g),8*(1-L.dot(e.object.quaternion))>h&&(L.copy(e.object.quaternion),e.dispatchEvent(J))}},this.dispose=function(){e.disconnect()},this.connect()}}console.log(S);let b=new F,i=new T(75,window.innerWidth/window.innerHeight,.1,1e3);i.position.z=5;let s=new R;s.setSize(window.innerWidth,window.innerHeight);document.body.appendChild(s.domElement);let d="scene_";new q().setPath("./page_1/").load([d+"left.jpg",d+"right.jpg",d+"top.jpg",d+"bottom.jpg",d+"back.jpg",d+"front.jpg"],function(n){s.initTexture(n),b.background=n});let O=new A,N=new H(1,1,1),ee=new y({color:65280}),m=new z(N,ee);b.add(m);let ne=new y({color:16776960}),r=new Q(i,s.domElement),l=null;console.log(r);let x=!1;function te(n){console.log(n),!x&&n.alpha!==null&&n.beta!==null&&n.gamma!==null&&(m.material=ne,x=!0,r.disconnect(),r.dispose(),l=new K(i))}function oe(n){i.aspect=window.innerWidth/window.innerHeight,i.updateProjectionMatrix(),s.setSize(window.innerWidth,window.innerHeight)}function ie(n){let o=new W;o.x=event.clientX/window.innerWidth*2-1,o.y=-(event.clientY/window.innerHeight)*2+1,O.setFromCamera(o,i);let e=O.intersectObject(m);e.length>0&&(console.log(e[0]),e[0].object.material.color.set("#"+(Math.random()*16777215<<0).toString(16).padStart(6,"0")))}function re(n){n.target!==document.getElementById("p1-next")&&r.lock()}function se(n){l===null&&r.unlock()}function ae(n){n.target!==document.getElementById("p1-next")&&l===null&&r.lock()}function ce(n){l===null&&r.unlock()}function de(){m.rotation.x+=.01,m.rotation.y+=.01,l!==null&&l.update(),s.render(b,i)}window.addEventListener("resize",oe);window.addEventListener("deviceorientation",te);window.addEventListener("mousedown",re);window.addEventListener("mouseup",se);window.addEventListener("pointerdown",ie);window.addEventListener("touchstart",ae);window.addEventListener("touchend",ce);s.setAnimationLoop(de);
