import{E as F,V as W,a as X,M as E,Q as _,T as B,S as Q,P as V,W as U,I as G,R as Z,B as $,b as J,c as K,C as T,d as N,e as ee}from"./three.module-qIM_A8UC.js";const h=new F(0,0,0,"YXZ"),w=new W,te={type:"change"},ne={type:"lock"},oe={type:"unlock"},y=Math.PI/2;class ie extends X{constructor(o,t){super(),this.camera=o,this.domElement=t,this.isLocked=!1,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.pointerSpeed=1,this._onMouseMove=re.bind(this),this._onPointerlockChange=se.bind(this),this._onPointerlockError=ae.bind(this),this.connect()}connect(){this.domElement.ownerDocument.addEventListener("mousemove",this._onMouseMove),this.domElement.ownerDocument.addEventListener("pointerlockchange",this._onPointerlockChange),this.domElement.ownerDocument.addEventListener("pointerlockerror",this._onPointerlockError)}disconnect(){this.domElement.ownerDocument.removeEventListener("mousemove",this._onMouseMove),this.domElement.ownerDocument.removeEventListener("pointerlockchange",this._onPointerlockChange),this.domElement.ownerDocument.removeEventListener("pointerlockerror",this._onPointerlockError)}dispose(){this.disconnect()}getObject(){return this.camera}getDirection(o){return o.set(0,0,-1).applyQuaternion(this.camera.quaternion)}moveForward(o){const t=this.camera;w.setFromMatrixColumn(t.matrix,0),w.crossVectors(t.up,w),t.position.addScaledVector(w,o)}moveRight(o){const t=this.camera;w.setFromMatrixColumn(t.matrix,0),t.position.addScaledVector(w,o)}lock(){this.domElement.requestPointerLock()}unlock(){this.domElement.ownerDocument.exitPointerLock()}}function re(e){if(this.isLocked===!1)return;const o=e.movementX||e.mozMovementX||e.webkitMovementX||0,t=e.movementY||e.mozMovementY||e.webkitMovementY||0,f=this.camera;h.setFromQuaternion(f.quaternion),h.y-=o*.002*this.pointerSpeed,h.x-=t*.002*this.pointerSpeed,h.x=Math.max(y-this.maxPolarAngle,Math.min(y-this.minPolarAngle,h.x)),f.quaternion.setFromEuler(h),this.dispatchEvent(te)}function se(){this.domElement.ownerDocument.pointerLockElement===this.domElement?(this.dispatchEvent(ne),this.isLocked=!0):(this.dispatchEvent(oe),this.isLocked=!1)}function ae(){console.error("THREE.PointerLockControls: Unable to use Pointer Lock API")}const ce=new W(0,0,1),S=new F,le=new _,de=new _(-Math.sqrt(.5),0,0,Math.sqrt(.5)),ue={type:"change"};class me extends X{constructor(o){super(),window.isSecureContext===!1&&console.error("THREE.DeviceOrientationControls: DeviceOrientationEvent is only available in secure contexts (https)");const t=this,f=1e-6,D=new _;this.object=o,this.object.rotation.reorder("YXZ"),this.enabled=!0,this.deviceOrientation={},this.screenOrientation=0,this.alphaOffset=0;const x=function(n){t.deviceOrientation=n},v=function(){t.screenOrientation=window.orientation||0},Y=function(n,L,P,O,M){S.set(P,L,-O,"YXZ"),n.setFromEuler(S),n.multiply(de),n.multiply(le.setFromAxisAngle(ce,-M))};this.connect=function(){v(),window.DeviceOrientationEvent!==void 0&&typeof window.DeviceOrientationEvent.requestPermission=="function"?window.DeviceOrientationEvent.requestPermission().then(function(n){n=="granted"&&(window.addEventListener("orientationchange",v),window.addEventListener("deviceorientation",x))}).catch(function(n){console.error("THREE.DeviceOrientationControls: Unable to use DeviceOrientation API:",n)}):(window.addEventListener("orientationchange",v),window.addEventListener("deviceorientation",x)),t.enabled=!0},this.disconnect=function(){window.removeEventListener("orientationchange",v),window.removeEventListener("deviceorientation",x),t.enabled=!1},this.update=function(){if(t.enabled===!1)return;const n=t.deviceOrientation;if(n){const L=n.alpha?E.degToRad(n.alpha)+t.alphaOffset:0,P=n.beta?E.degToRad(n.beta):0,O=n.gamma?E.degToRad(n.gamma):0,M=t.screenOrientation?E.degToRad(t.screenOrientation):0;Y(t.object.quaternion,L,P,O,M),8*(1-D.dot(t.object.quaternion))>f&&(D.copy(t.object.quaternion),t.dispatchEvent(ue))}},this.dispose=function(){t.disconnect()},this.connect()}}console.log(B);let g=new Q,s=new V(75,window.innerWidth/window.innerHeight,.1,1e3);s.position.z=5;let c=new U;c.setSize(window.innerWidth,window.innerHeight);document.body.appendChild(c.domElement);let l="./page_1/scene_",r=[],k=0;function d(){console.log("here"),r[0]=new T([he,q,z,A,R,j]),r[1]=new T([we,q,z,A,R,j]);for(let e=0;e<r.length;e++)r[e].needsUpdate=!0,r[e].colorSpace=N,c.initTexture(r[e]);g.background=r[0],console.log(g.background)}let u=new G,m=7,i=0,j=u.load(l+"front.jpg",function(e){i++,i==m&&d()}),R=u.load(l+"back.jpg",function(e){i++,i==m&&d()}),he=u.load(l+"left_0.jpg",function(e){i++,i==m&&d()}),we=u.load(l+"left_1.jpg",function(e){i++,i==m&&d()}),q=u.load(l+"right.jpg",function(e){i++,i==m&&d()}),z=u.load(l+"top.jpg",function(e){i++,i==m&&d()}),A=u.load(l+"bottom.jpg",function(e){i++,i==m&&d()}),H=new Z,pe=new $(1.3,1.3,1.3),C=new J({transparent:!0,opacity:0});C.transparent=!0;C.opacity=0;let b=new K(pe,C);g.add(b);b.position.x=-3;b.position.z=4.7;let a=new ie(s,c.domElement),p=null;console.log(a);let I=!1;function ge(e){console.log(e),!I&&e.alpha!==null&&e.beta!==null&&e.gamma!==null&&(I=!0,a.disconnect(),a.dispose(),p=new me(s))}function fe(e){s.aspect=window.innerWidth/window.innerHeight,s.updateProjectionMatrix(),c.setSize(window.innerWidth,window.innerHeight)}function ve(e){let o=new ee;o.x=e.clientX/window.innerWidth*2-1,o.y=-(e.clientY/window.innerHeight)*2+1,H.setFromCamera(o,s);let t=H.intersectObject(b);t.length>0&&(console.log(t[0]),r.length>0&&(console.log("here"),k++,k>=r.length&&(k=0),g.background=r[k]))}function Ee(e){e.target!==document.getElementById("p1-next")&&a.lock()}function ke(e){p===null&&a.unlock()}function be(e){e.target!==document.getElementById("p1-next")&&p===null&&a.lock()}function xe(e){p===null&&a.unlock()}function Le(){p!==null&&p.update(),c.render(g,s)}window.addEventListener("resize",fe);window.addEventListener("deviceorientation",ge);window.addEventListener("mousedown",Ee);window.addEventListener("mouseup",ke);window.addEventListener("pointerdown",ve);window.addEventListener("touchstart",be);window.addEventListener("touchend",xe);c.setAnimationLoop(Le);
