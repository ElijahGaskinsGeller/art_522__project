import{E as I,V as F,a as W,M as k,Q as _,T as B,S as Q,P as V,W as U,I as G,R as Z,B as $,b as X,c as J,C as D,d as K,e as N}from"./three.module-qIM_A8UC.js";const h=new I(0,0,0,"YXZ"),w=new F,ee={type:"change"},te={type:"lock"},ne={type:"unlock"},T=Math.PI/2;class oe extends W{constructor(o,t){super(),this.camera=o,this.domElement=t,this.isLocked=!1,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.pointerSpeed=1,this._onMouseMove=ie.bind(this),this._onPointerlockChange=re.bind(this),this._onPointerlockError=se.bind(this),this.connect()}connect(){this.domElement.ownerDocument.addEventListener("mousemove",this._onMouseMove),this.domElement.ownerDocument.addEventListener("pointerlockchange",this._onPointerlockChange),this.domElement.ownerDocument.addEventListener("pointerlockerror",this._onPointerlockError)}disconnect(){this.domElement.ownerDocument.removeEventListener("mousemove",this._onMouseMove),this.domElement.ownerDocument.removeEventListener("pointerlockchange",this._onPointerlockChange),this.domElement.ownerDocument.removeEventListener("pointerlockerror",this._onPointerlockError)}dispose(){this.disconnect()}getObject(){return this.camera}getDirection(o){return o.set(0,0,-1).applyQuaternion(this.camera.quaternion)}moveForward(o){const t=this.camera;w.setFromMatrixColumn(t.matrix,0),w.crossVectors(t.up,w),t.position.addScaledVector(w,o)}moveRight(o){const t=this.camera;w.setFromMatrixColumn(t.matrix,0),t.position.addScaledVector(w,o)}lock(){this.domElement.requestPointerLock()}unlock(){this.domElement.ownerDocument.exitPointerLock()}}function ie(e){if(this.isLocked===!1)return;const o=e.movementX||e.mozMovementX||e.webkitMovementX||0,t=e.movementY||e.mozMovementY||e.webkitMovementY||0,v=this.camera;h.setFromQuaternion(v.quaternion),h.y-=o*.002*this.pointerSpeed,h.x-=t*.002*this.pointerSpeed,h.x=Math.max(T-this.maxPolarAngle,Math.min(T-this.minPolarAngle,h.x)),v.quaternion.setFromEuler(h),this.dispatchEvent(ee)}function re(){this.domElement.ownerDocument.pointerLockElement===this.domElement?(this.dispatchEvent(te),this.isLocked=!0):(this.dispatchEvent(ne),this.isLocked=!1)}function se(){console.error("THREE.PointerLockControls: Unable to use Pointer Lock API")}const ae=new F(0,0,1),y=new I,ce=new _,le=new _(-Math.sqrt(.5),0,0,Math.sqrt(.5)),de={type:"change"};class ue extends W{constructor(o){super(),window.isSecureContext===!1&&console.error("THREE.DeviceOrientationControls: DeviceOrientationEvent is only available in secure contexts (https)");const t=this,v=1e-6,C=new _;this.object=o,this.object.rotation.reorder("YXZ"),this.enabled=!0,this.deviceOrientation={},this.screenOrientation=0,this.alphaOffset=0;const x=function(n){t.deviceOrientation=n},E=function(){t.screenOrientation=window.orientation||0},Y=function(n,L,P,M,O){y.set(P,L,-M,"YXZ"),n.setFromEuler(y),n.multiply(le),n.multiply(ce.setFromAxisAngle(ae,-O))};this.connect=function(){E(),window.DeviceOrientationEvent!==void 0&&typeof window.DeviceOrientationEvent.requestPermission=="function"?window.DeviceOrientationEvent.requestPermission().then(function(n){n=="granted"&&(window.addEventListener("orientationchange",E),window.addEventListener("deviceorientation",x))}).catch(function(n){console.error("THREE.DeviceOrientationControls: Unable to use DeviceOrientation API:",n)}):(window.addEventListener("orientationchange",E),window.addEventListener("deviceorientation",x)),t.enabled=!0},this.disconnect=function(){window.removeEventListener("orientationchange",E),window.removeEventListener("deviceorientation",x),t.enabled=!1},this.update=function(){if(t.enabled===!1)return;const n=t.deviceOrientation;if(n){const L=n.alpha?k.degToRad(n.alpha)+t.alphaOffset:0,P=n.beta?k.degToRad(n.beta):0,M=n.gamma?k.degToRad(n.gamma):0,O=t.screenOrientation?k.degToRad(t.screenOrientation):0;Y(t.object.quaternion,L,P,M,O),8*(1-C.dot(t.object.quaternion))>v&&(C.copy(t.object.quaternion),t.dispatchEvent(de))}},this.dispose=function(){t.disconnect()},this.connect()}}console.log(B);let g=new Q,s=new V(75,window.innerWidth/window.innerHeight,.1,1e3);s.position.z=5;let c=new U;c.setSize(window.innerWidth,window.innerHeight);document.body.appendChild(c.domElement);let l="./page_1/scene_",r=[],b=0;function d(){console.log("here"),r[0]=new D([me,R,q,z,j,S]),r[1]=new D([he,R,q,z,j,S]);for(let e=0;e<r.length;e++)r[e].needsUpdate=!0,r[e].colorSpace=K,c.initTexture(r[e]);g.background=r[0],console.log(g.background)}let u=new G,m=7,i=0,S=u.load(l+"front.jpg",function(e){i++,i==m&&d()}),j=u.load(l+"back.jpg",function(e){i++,i==m&&d()}),me=u.load(l+"left_0.jpg",function(e){i++,i==m&&d()}),he=u.load(l+"left_1.jpg",function(e){i++,i==m&&d()}),R=u.load(l+"right.jpg",function(e){i++,i==m&&d()}),q=u.load(l+"top.jpg",function(e){i++,i==m&&d()}),z=u.load(l+"bottom.jpg",function(e){i++,i==m&&d()}),A=new Z,we=new $(1.3,1.3,1.3),fe=new X({color:65280,transparent:!0,opacity:0}),p=new J(we,fe);g.add(p);p.position.x=-3;p.position.z=4.7;let ge=new X({color:16776960}),a=new oe(s,c.domElement),f=null;console.log(a);let H=!1;function pe(e){console.log(e),!H&&e.alpha!==null&&e.beta!==null&&e.gamma!==null&&(p.material=ge,H=!0,a.disconnect(),a.dispose(),f=new ue(s))}function ve(e){s.aspect=window.innerWidth/window.innerHeight,s.updateProjectionMatrix(),c.setSize(window.innerWidth,window.innerHeight)}function Ee(e){let o=new N;o.x=e.clientX/window.innerWidth*2-1,o.y=-(e.clientY/window.innerHeight)*2+1,A.setFromCamera(o,s);let t=A.intersectObject(p);t.length>0&&(console.log(t[0]),r.length>0&&(console.log("here"),b++,b>=r.length&&(b=0),g.background=r[b]))}function ke(e){e.target!==document.getElementById("p1-next")&&a.lock()}function be(e){f===null&&a.unlock()}function xe(e){e.target!==document.getElementById("p1-next")&&f===null&&a.lock()}function Le(e){f===null&&a.unlock()}function Pe(){f!==null&&f.update(),c.render(g,s)}window.addEventListener("resize",ve);window.addEventListener("deviceorientation",pe);window.addEventListener("mousedown",ke);window.addEventListener("mouseup",be);window.addEventListener("pointerdown",Ee);window.addEventListener("touchstart",xe);window.addEventListener("touchend",Le);c.setAnimationLoop(Pe);
