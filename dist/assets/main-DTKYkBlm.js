import{E as Y,V as O,a as B,M as x,Q as A,T as V,S as G,P as U,W as Z,I as $,R as J,B as K,b as N,c as ee,C as D,d as te,e as F}from"./three.module-CvTIG-M_.js";const E=new Y(0,0,0,"YXZ"),b=new O,ne={type:"change"},oe={type:"lock"},ie={type:"unlock"},H=Math.PI/2;class re extends B{constructor(n,t){super(),this.camera=n,this.domElement=t,this.isLocked=!1,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.pointerSpeed=1,this._onMouseMove=se.bind(this),this._onPointerlockChange=ae.bind(this),this._onPointerlockError=ce.bind(this),this.connect()}connect(){this.domElement.ownerDocument.addEventListener("mousemove",this._onMouseMove),this.domElement.ownerDocument.addEventListener("pointerlockchange",this._onPointerlockChange),this.domElement.ownerDocument.addEventListener("pointerlockerror",this._onPointerlockError)}disconnect(){this.domElement.ownerDocument.removeEventListener("mousemove",this._onMouseMove),this.domElement.ownerDocument.removeEventListener("pointerlockchange",this._onPointerlockChange),this.domElement.ownerDocument.removeEventListener("pointerlockerror",this._onPointerlockError)}dispose(){this.disconnect()}getObject(){return this.camera}getDirection(n){return n.set(0,0,-1).applyQuaternion(this.camera.quaternion)}moveForward(n){const t=this.camera;b.setFromMatrixColumn(t.matrix,0),b.crossVectors(t.up,b),t.position.addScaledVector(b,n)}moveRight(n){const t=this.camera;b.setFromMatrixColumn(t.matrix,0),t.position.addScaledVector(b,n)}lock(){this.domElement.requestPointerLock()}unlock(){this.domElement.ownerDocument.exitPointerLock()}}function se(e){if(this.isLocked===!1)return;const n=e.movementX||e.mozMovementX||e.webkitMovementX||0,t=e.movementY||e.mozMovementY||e.webkitMovementY||0,l=this.camera;E.setFromQuaternion(l.quaternion),E.y-=n*.002*this.pointerSpeed,E.x-=t*.002*this.pointerSpeed,E.x=Math.max(H-this.maxPolarAngle,Math.min(H-this.minPolarAngle,E.x)),l.quaternion.setFromEuler(E),this.dispatchEvent(ne)}function ae(){this.domElement.ownerDocument.pointerLockElement===this.domElement?(this.dispatchEvent(oe),this.isLocked=!0):(this.dispatchEvent(ie),this.isLocked=!1)}function ce(){console.error("THREE.PointerLockControls: Unable to use Pointer Lock API")}const le=new O(0,0,1),I=new Y,de=new A,ue=new A(-Math.sqrt(.5),0,0,Math.sqrt(.5)),me={type:"change"};class he extends B{constructor(n){super(),window.isSecureContext===!1&&console.error("THREE.DeviceOrientationControls: DeviceOrientationEvent is only available in secure contexts (https)");const t=this,l=1e-6,p=new A;this.object=n,this.object.rotation.reorder("YXZ"),this.enabled=!0,this.deviceOrientation={},this.screenOrientation=0,this.alphaOffset=0;const v=function(i){t.deviceOrientation=i},o=function(){t.screenOrientation=window.orientation||0},Q=function(i,_,M,T,C){I.set(M,_,-T,"YXZ"),i.setFromEuler(I),i.multiply(ue),i.multiply(de.setFromAxisAngle(le,-C))};this.connect=function(){o(),window.DeviceOrientationEvent!==void 0&&typeof window.DeviceOrientationEvent.requestPermission=="function"?window.DeviceOrientationEvent.requestPermission().then(function(i){i=="granted"&&(window.addEventListener("orientationchange",o),window.addEventListener("deviceorientation",v))}).catch(function(i){console.error("THREE.DeviceOrientationControls: Unable to use DeviceOrientation API:",i)}):(window.addEventListener("orientationchange",o),window.addEventListener("deviceorientation",v)),t.enabled=!0},this.disconnect=function(){window.removeEventListener("orientationchange",o),window.removeEventListener("deviceorientation",v),t.enabled=!1},this.update=function(){if(t.enabled===!1)return;const i=t.deviceOrientation;if(i){const _=i.alpha?x.degToRad(i.alpha)+t.alphaOffset:0,M=i.beta?x.degToRad(i.beta):0,T=i.gamma?x.degToRad(i.gamma):0,C=t.screenOrientation?x.degToRad(t.screenOrientation):0;Q(t.object.quaternion,_,M,T,C),8*(1-p.dot(t.object.quaternion))>l&&(p.copy(t.object.quaternion),t.dispatchEvent(me))}},this.dispose=function(){t.disconnect()},this.connect()}}console.log(V);let w=new G,c=new U(75,window.innerWidth/window.innerHeight,.1,1e3);c.position.z=5;let g=new Z;g.setSize(window.innerWidth,window.innerHeight);document.body.appendChild(g.domElement);let d="./page_1/scene_",r=[],a=0;function u(){console.log("here"),r[0]=new D([we,S,R,q,j,y]),r[1]=new D([fe,S,R,q,j,y]),r[2]=new D([ge,S,R,q,j,y]);for(let e=0;e<r.length;e++)r[e].needsUpdate=!0,r[e].colorSpace=te,g.initTexture(r[e]);w.background=r[0],console.log(w.background)}let m=new $,h=8,s=0,y=m.load(d+"front.jpg",function(e){s++,s==h&&u()}),j=m.load(d+"back.jpg",function(e){s++,s==h&&u()}),we=m.load(d+"left_0.jpg",function(e){s++,s==h&&u()}),fe=m.load(d+"left_1.jpg",function(e){s++,s==h&&u()}),ge=m.load(d+"left_2.jpg",function(e){s++,s==h&&u()}),S=m.load(d+"right.jpg",function(e){s++,s==h&&u()}),R=m.load(d+"top.jpg",function(e){s++,s==h&&u()}),q=m.load(d+"bottom.jpg",function(e){s++,s==h&&u()}),W=new J,pe=new K(1.3,1.3,1.3),z=new N({transparent:!0,opacity:0});z.transparent=!0;z.opacity=0;let P=new ee(pe,z);w.add(P);P.position.x=-3;P.position.z=4.7;let f=new re(c,g.domElement),k=null;console.log(f);let X=!1;function ve(e){console.log(e),!X&&e.alpha!==null&&e.beta!==null&&e.gamma!==null&&(X=!0,f.disconnect(),f.dispose(),k=new he(c))}function Ee(e){c.aspect=window.innerWidth/window.innerHeight,c.updateProjectionMatrix(),g.setSize(window.innerWidth,window.innerHeight)}function be(e){let n=new F;n.x=e.clientX/window.innerWidth*2-1,n.y=-(e.clientY/window.innerHeight)*2+1,W.setFromCamera(n,c);let t=W.intersectObject(P);t.length>0&&(console.log(t[0]),r.length>0&&(console.log("here"),a++,a>=r.length&&(a=0),w.background=r[a]))}function ke(e){e.target!==document.getElementById("p1-next")&&f.lock()}function xe(e){k===null&&f.unlock()}function Le(e){e.target!==document.getElementById("p1-next")&&k===null&&f.lock()}function Oe(e){k===null&&f.unlock()}let L=[];function Pe(){if(k!==null)k.update();else{let e=navigator.getGamepads();for(let n=0;n<e.length;n++){let t=e[n];if(t!==null){let l=t.axes[0],p=-t.axes[1],v=new F(l,p).normalize();l*l>.2&&c.rotateOnWorldAxis(new O(0,1,0),v.x*-.01),p*p>.2&&c.rotateOnAxis(new O(1,0,0),v.y*.01);for(let o=0;o<t.buttons.length;o++)if(t.buttons[o].pressed&&console.log(o),L[o]!==void 0&&L[o]&&L[o]!==t.buttons[o].pressed)switch(o){case 14:r.length>0&&(a--,a<0&&(a=r.length-1),w.background=r[a]);break;case 15:r.length>0&&(a++,a>=r.length&&(a=0),w.background=r[a]);break}t.buttons[5].pressed&&(window.location.href="page_2.html");for(let o=0;o<t.buttons.length;o++)L[o]=t.buttons[o].pressed}}}g.render(w,c)}window.addEventListener("resize",Ee);window.addEventListener("deviceorientation",ve);window.addEventListener("mousedown",ke);window.addEventListener("mouseup",xe);window.addEventListener("pointerdown",be);window.addEventListener("touchstart",Le);window.addEventListener("touchend",Oe);g.setAnimationLoop(Pe);
