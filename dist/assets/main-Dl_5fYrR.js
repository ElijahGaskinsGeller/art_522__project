import{E as F,V as W,a as X,M as E,Q as S,T as B,S as Q,P as V,W as U,I as G,R as Z,B as $,b as J,c as K,C as M,d as N,e as ee}from"./three.module-CvTIG-M_.js";const h=new F(0,0,0,"YXZ"),w=new W,te={type:"change"},ne={type:"lock"},oe={type:"unlock"},z=Math.PI/2;class ie extends X{constructor(i,t){super(),this.camera=i,this.domElement=t,this.isLocked=!1,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.pointerSpeed=1,this._onMouseMove=re.bind(this),this._onPointerlockChange=se.bind(this),this._onPointerlockError=ae.bind(this),this.connect()}connect(){this.domElement.ownerDocument.addEventListener("mousemove",this._onMouseMove),this.domElement.ownerDocument.addEventListener("pointerlockchange",this._onPointerlockChange),this.domElement.ownerDocument.addEventListener("pointerlockerror",this._onPointerlockError)}disconnect(){this.domElement.ownerDocument.removeEventListener("mousemove",this._onMouseMove),this.domElement.ownerDocument.removeEventListener("pointerlockchange",this._onPointerlockChange),this.domElement.ownerDocument.removeEventListener("pointerlockerror",this._onPointerlockError)}dispose(){this.disconnect()}getObject(){return this.camera}getDirection(i){return i.set(0,0,-1).applyQuaternion(this.camera.quaternion)}moveForward(i){const t=this.camera;w.setFromMatrixColumn(t.matrix,0),w.crossVectors(t.up,w),t.position.addScaledVector(w,i)}moveRight(i){const t=this.camera;w.setFromMatrixColumn(t.matrix,0),t.position.addScaledVector(w,i)}lock(){this.domElement.requestPointerLock()}unlock(){this.domElement.ownerDocument.exitPointerLock()}}function re(e){if(this.isLocked===!1)return;const i=e.movementX||e.mozMovementX||e.webkitMovementX||0,t=e.movementY||e.mozMovementY||e.webkitMovementY||0,p=this.camera;h.setFromQuaternion(p.quaternion),h.y-=i*.002*this.pointerSpeed,h.x-=t*.002*this.pointerSpeed,h.x=Math.max(z-this.maxPolarAngle,Math.min(z-this.minPolarAngle,h.x)),p.quaternion.setFromEuler(h),this.dispatchEvent(te)}function se(){this.domElement.ownerDocument.pointerLockElement===this.domElement?(this.dispatchEvent(ne),this.isLocked=!0):(this.dispatchEvent(oe),this.isLocked=!1)}function ae(){console.error("THREE.PointerLockControls: Unable to use Pointer Lock API")}const ce=new W(0,0,1),A=new F,le=new S,de=new S(-Math.sqrt(.5),0,0,Math.sqrt(.5)),ue={type:"change"};class me extends X{constructor(i){super(),window.isSecureContext===!1&&console.error("THREE.DeviceOrientationControls: DeviceOrientationEvent is only available in secure contexts (https)");const t=this,p=1e-6,q=new S;this.object=i,this.object.rotation.reorder("YXZ"),this.enabled=!0,this.deviceOrientation={},this.screenOrientation=0,this.alphaOffset=0;const x=function(n){t.deviceOrientation=n},v=function(){t.screenOrientation=window.orientation||0},Y=function(n,L,P,O,_){A.set(P,L,-O,"YXZ"),n.setFromEuler(A),n.multiply(de),n.multiply(le.setFromAxisAngle(ce,-_))};this.connect=function(){v(),window.DeviceOrientationEvent!==void 0&&typeof window.DeviceOrientationEvent.requestPermission=="function"?window.DeviceOrientationEvent.requestPermission().then(function(n){n=="granted"&&(window.addEventListener("orientationchange",v),window.addEventListener("deviceorientation",x))}).catch(function(n){console.error("THREE.DeviceOrientationControls: Unable to use DeviceOrientation API:",n)}):(window.addEventListener("orientationchange",v),window.addEventListener("deviceorientation",x)),t.enabled=!0},this.disconnect=function(){window.removeEventListener("orientationchange",v),window.removeEventListener("deviceorientation",x),t.enabled=!1},this.update=function(){if(t.enabled===!1)return;const n=t.deviceOrientation;if(n){const L=n.alpha?E.degToRad(n.alpha)+t.alphaOffset:0,P=n.beta?E.degToRad(n.beta):0,O=n.gamma?E.degToRad(n.gamma):0,_=t.screenOrientation?E.degToRad(t.screenOrientation):0;Y(t.object.quaternion,L,P,O,_),8*(1-q.dot(t.object.quaternion))>p&&(q.copy(t.object.quaternion),t.dispatchEvent(ue))}},this.dispose=function(){t.disconnect()},this.connect()}}console.log(B);let g=new Q,d=new V(75,window.innerWidth/window.innerHeight,.1,1e3);d.position.z=5;let m=new U;m.setSize(window.innerWidth,window.innerHeight);document.body.appendChild(m.domElement);let s="./page_1/scene_",r=[],k=0;function a(){console.log("here"),r[0]=new M([he,D,y,j,C,T]),r[1]=new M([we,D,y,j,C,T]),r[2]=new M([fe,D,y,j,C,T]);for(let e=0;e<r.length;e++)r[e].needsUpdate=!0,r[e].colorSpace=N,m.initTexture(r[e]);g.background=r[0],console.log(g.background)}let c=new G,l=8,o=0,T=c.load(s+"front.jpg",function(e){o++,o==l&&a()}),C=c.load(s+"back.jpg",function(e){o++,o==l&&a()}),he=c.load(s+"left_0.jpg",function(e){o++,o==l&&a()}),we=c.load(s+"left_1.jpg",function(e){o++,o==l&&a()}),fe=c.load(s+"left_2.jpg",function(e){o++,o==l&&a()}),D=c.load(s+"right.jpg",function(e){o++,o==l&&a()}),y=c.load(s+"top.jpg",function(e){o++,o==l&&a()}),j=c.load(s+"bottom.jpg",function(e){o++,o==l&&a()}),H=new Z,ge=new $(1.3,1.3,1.3),R=new J({transparent:!0,opacity:0});R.transparent=!0;R.opacity=0;let b=new K(ge,R);g.add(b);b.position.x=-3;b.position.z=4.7;let u=new ie(d,m.domElement),f=null;console.log(u);let I=!1;function pe(e){console.log(e),!I&&e.alpha!==null&&e.beta!==null&&e.gamma!==null&&(I=!0,u.disconnect(),u.dispose(),f=new me(d))}function ve(e){d.aspect=window.innerWidth/window.innerHeight,d.updateProjectionMatrix(),m.setSize(window.innerWidth,window.innerHeight)}function Ee(e){let i=new ee;i.x=e.clientX/window.innerWidth*2-1,i.y=-(e.clientY/window.innerHeight)*2+1,H.setFromCamera(i,d);let t=H.intersectObject(b);t.length>0&&(console.log(t[0]),r.length>0&&(console.log("here"),k++,k>=r.length&&(k=0),g.background=r[k]))}function ke(e){e.target!==document.getElementById("p1-next")&&u.lock()}function be(e){f===null&&u.unlock()}function xe(e){e.target!==document.getElementById("p1-next")&&f===null&&u.lock()}function Le(e){f===null&&u.unlock()}function Pe(){f!==null&&f.update(),m.render(g,d)}window.addEventListener("resize",ve);window.addEventListener("deviceorientation",pe);window.addEventListener("mousedown",ke);window.addEventListener("mouseup",be);window.addEventListener("pointerdown",Ee);window.addEventListener("touchstart",xe);window.addEventListener("touchend",Le);m.setAnimationLoop(Pe);
