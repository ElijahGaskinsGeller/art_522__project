import{f as ft,g as ht,M as bt,a as gt,V as f,h as O,i as k,Q as Xe,j as Ue,e as y,T as yt,S as Et,P as wt,W as Tt,k as Pt,b as Lt,D as Ot,l as Mt,A as xt,m as Rt}from"./three.module-CvTIG-M_.js";import{G as kt}from"./GLTFLoader-DeYvS692.js";const Ze={type:"change"},ye={type:"start"},We={type:"end"},se=new ft,Ge=new ht,At=Math.cos(70*bt.DEG2RAD);class jt extends gt{constructor(p,m){super(),this.object=p,this.domElement=m,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new f,this.cursor=new f,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:O.ROTATE,MIDDLE:O.DOLLY,RIGHT:O.PAN},this.touches={ONE:k.ROTATE,TWO:k.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return n.phi},this.getAzimuthalAngle=function(){return n.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(t){t.addEventListener("keydown",ge),this._domElementKeyEvents=t},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",ge),this._domElementKeyEvents=null},this.saveState=function(){e.target0.copy(e.target),e.position0.copy(e.object.position),e.zoom0=e.object.zoom},this.reset=function(){e.target.copy(e.target0),e.object.position.copy(e.position0),e.object.zoom=e.zoom0,e.object.updateProjectionMatrix(),e.dispatchEvent(Ze),e.update(),r=i.NONE},this.update=function(){const t=new f,o=new Xe().setFromUnitVectors(p.up,new f(0,1,0)),a=o.clone().invert(),s=new f,d=new Xe,R=new f,g=2*Math.PI;return function(mt=null){const He=e.object.position;t.copy(He).sub(e.target),t.applyQuaternion(o),n.setFromVector3(t),e.autoRotate&&r===i.NONE&&q(Be(mt)),e.enableDamping?(n.theta+=w.theta*e.dampingFactor,n.phi+=w.phi*e.dampingFactor):(n.theta+=w.theta,n.phi+=w.phi);let T=e.minAzimuthAngle,P=e.maxAzimuthAngle;isFinite(T)&&isFinite(P)&&(T<-Math.PI?T+=g:T>Math.PI&&(T-=g),P<-Math.PI?P+=g:P>Math.PI&&(P-=g),T<=P?n.theta=Math.max(T,Math.min(P,n.theta)):n.theta=n.theta>(T+P)/2?Math.max(T,n.theta):Math.min(P,n.theta)),n.phi=Math.max(e.minPolarAngle,Math.min(e.maxPolarAngle,n.phi)),n.makeSafe(),e.enableDamping===!0?e.target.addScaledVector(C,e.dampingFactor):e.target.add(C),e.target.sub(e.cursor),e.target.clampLength(e.minTargetRadius,e.maxTargetRadius),e.target.add(e.cursor);let J=!1;if(e.zoomToCursor&&oe||e.object.isOrthographicCamera)n.radius=he(n.radius);else{const L=n.radius;n.radius=he(n.radius*j),J=L!=n.radius}if(t.setFromSpherical(n),t.applyQuaternion(a),He.copy(e.target).add(t),e.object.lookAt(e.target),e.enableDamping===!0?(w.theta*=1-e.dampingFactor,w.phi*=1-e.dampingFactor,C.multiplyScalar(1-e.dampingFactor)):(w.set(0,0,0),C.set(0,0,0)),e.zoomToCursor&&oe){let L=null;if(e.object.isPerspectiveCamera){const $=t.length();L=he($*j);const ie=$-L;e.object.position.addScaledVector(Te,ie),e.object.updateMatrixWorld(),J=!!ie}else if(e.object.isOrthographicCamera){const $=new f(x.x,x.y,0);$.unproject(e.object);const ie=e.object.zoom;e.object.zoom=Math.max(e.minZoom,Math.min(e.maxZoom,e.object.zoom/j)),e.object.updateProjectionMatrix(),J=ie!==e.object.zoom;const Ke=new f(x.x,x.y,0);Ke.unproject(e.object),e.object.position.sub(Ke).add($),e.object.updateMatrixWorld(),L=t.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),e.zoomToCursor=!1;L!==null&&(this.screenSpacePanning?e.target.set(0,0,-1).transformDirection(e.object.matrix).multiplyScalar(L).add(e.object.position):(se.origin.copy(e.object.position),se.direction.set(0,0,-1).transformDirection(e.object.matrix),Math.abs(e.object.up.dot(se.direction))<At?p.lookAt(e.target):(Ge.setFromNormalAndCoplanarPoint(e.object.up,e.target),se.intersectPlane(Ge,e.target))))}else if(e.object.isOrthographicCamera){const L=e.object.zoom;e.object.zoom=Math.max(e.minZoom,Math.min(e.maxZoom,e.object.zoom/j)),L!==e.object.zoom&&(e.object.updateProjectionMatrix(),J=!0)}return j=1,oe=!1,J||s.distanceToSquared(e.object.position)>M||8*(1-d.dot(e.object.quaternion))>M||R.distanceToSquared(e.target)>M?(e.dispatchEvent(Ze),s.copy(e.object.position),d.copy(e.object.quaternion),R.copy(e.target),!0):!1}}(),this.dispose=function(){e.domElement.removeEventListener("contextmenu",ze),e.domElement.removeEventListener("pointerdown",Ne),e.domElement.removeEventListener("pointercancel",Q),e.domElement.removeEventListener("wheel",_e),e.domElement.removeEventListener("pointermove",be),e.domElement.removeEventListener("pointerup",Q),e.domElement.getRootNode().removeEventListener("keydown",Ie,{capture:!0}),e._domElementKeyEvents!==null&&(e._domElementKeyEvents.removeEventListener("keydown",ge),e._domElementKeyEvents=null)};const e=this,i={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let r=i.NONE;const M=1e-6,n=new Ue,w=new Ue;let j=1;const C=new f,D=new y,S=new y,Y=new y,N=new y,_=new y,z=new y,F=new y,H=new y,I=new y,Te=new f,x=new y;let oe=!1;const c=[],B={};let pe=!1;function Be(t){return t!==null?2*Math.PI/60*e.autoRotateSpeed*t:2*Math.PI/60/60*e.autoRotateSpeed}function ne(t){const o=Math.abs(t*.01);return Math.pow(.95,e.zoomSpeed*o)}function q(t){w.theta-=t}function ae(t){w.phi-=t}const Pe=function(){const t=new f;return function(a,s){t.setFromMatrixColumn(s,0),t.multiplyScalar(-a),C.add(t)}}(),Le=function(){const t=new f;return function(a,s){e.screenSpacePanning===!0?t.setFromMatrixColumn(s,1):(t.setFromMatrixColumn(s,0),t.crossVectors(e.object.up,t)),t.multiplyScalar(a),C.add(t)}}(),K=function(){const t=new f;return function(a,s){const d=e.domElement;if(e.object.isPerspectiveCamera){const R=e.object.position;t.copy(R).sub(e.target);let g=t.length();g*=Math.tan(e.object.fov/2*Math.PI/180),Pe(2*a*g/d.clientHeight,e.object.matrix),Le(2*s*g/d.clientHeight,e.object.matrix)}else e.object.isOrthographicCamera?(Pe(a*(e.object.right-e.object.left)/e.object.zoom/d.clientWidth,e.object.matrix),Le(s*(e.object.top-e.object.bottom)/e.object.zoom/d.clientHeight,e.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),e.enablePan=!1)}}();function me(t){e.object.isPerspectiveCamera||e.object.isOrthographicCamera?j/=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),e.enableZoom=!1)}function Oe(t){e.object.isPerspectiveCamera||e.object.isOrthographicCamera?j*=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),e.enableZoom=!1)}function fe(t,o){if(!e.zoomToCursor)return;oe=!0;const a=e.domElement.getBoundingClientRect(),s=t-a.left,d=o-a.top,R=a.width,g=a.height;x.x=s/R*2-1,x.y=-(d/g)*2+1,Te.set(x.x,x.y,1).unproject(e.object).sub(e.object.position).normalize()}function he(t){return Math.max(e.minDistance,Math.min(e.maxDistance,t))}function Me(t){D.set(t.clientX,t.clientY)}function qe(t){fe(t.clientX,t.clientX),F.set(t.clientX,t.clientY)}function xe(t){N.set(t.clientX,t.clientY)}function Qe(t){S.set(t.clientX,t.clientY),Y.subVectors(S,D).multiplyScalar(e.rotateSpeed);const o=e.domElement;q(2*Math.PI*Y.x/o.clientHeight),ae(2*Math.PI*Y.y/o.clientHeight),D.copy(S),e.update()}function Je(t){H.set(t.clientX,t.clientY),I.subVectors(H,F),I.y>0?me(ne(I.y)):I.y<0&&Oe(ne(I.y)),F.copy(H),e.update()}function $e(t){_.set(t.clientX,t.clientY),z.subVectors(_,N).multiplyScalar(e.panSpeed),K(z.x,z.y),N.copy(_),e.update()}function et(t){fe(t.clientX,t.clientY),t.deltaY<0?Oe(ne(t.deltaY)):t.deltaY>0&&me(ne(t.deltaY)),e.update()}function tt(t){let o=!1;switch(t.code){case e.keys.UP:t.ctrlKey||t.metaKey||t.shiftKey?ae(2*Math.PI*e.rotateSpeed/e.domElement.clientHeight):K(0,e.keyPanSpeed),o=!0;break;case e.keys.BOTTOM:t.ctrlKey||t.metaKey||t.shiftKey?ae(-2*Math.PI*e.rotateSpeed/e.domElement.clientHeight):K(0,-e.keyPanSpeed),o=!0;break;case e.keys.LEFT:t.ctrlKey||t.metaKey||t.shiftKey?q(2*Math.PI*e.rotateSpeed/e.domElement.clientHeight):K(e.keyPanSpeed,0),o=!0;break;case e.keys.RIGHT:t.ctrlKey||t.metaKey||t.shiftKey?q(-2*Math.PI*e.rotateSpeed/e.domElement.clientHeight):K(-e.keyPanSpeed,0),o=!0;break}o&&(t.preventDefault(),e.update())}function Re(t){if(c.length===1)D.set(t.pageX,t.pageY);else{const o=X(t),a=.5*(t.pageX+o.x),s=.5*(t.pageY+o.y);D.set(a,s)}}function ke(t){if(c.length===1)N.set(t.pageX,t.pageY);else{const o=X(t),a=.5*(t.pageX+o.x),s=.5*(t.pageY+o.y);N.set(a,s)}}function Ae(t){const o=X(t),a=t.pageX-o.x,s=t.pageY-o.y,d=Math.sqrt(a*a+s*s);F.set(0,d)}function ot(t){e.enableZoom&&Ae(t),e.enablePan&&ke(t)}function nt(t){e.enableZoom&&Ae(t),e.enableRotate&&Re(t)}function je(t){if(c.length==1)S.set(t.pageX,t.pageY);else{const a=X(t),s=.5*(t.pageX+a.x),d=.5*(t.pageY+a.y);S.set(s,d)}Y.subVectors(S,D).multiplyScalar(e.rotateSpeed);const o=e.domElement;q(2*Math.PI*Y.x/o.clientHeight),ae(2*Math.PI*Y.y/o.clientHeight),D.copy(S)}function De(t){if(c.length===1)_.set(t.pageX,t.pageY);else{const o=X(t),a=.5*(t.pageX+o.x),s=.5*(t.pageY+o.y);_.set(a,s)}z.subVectors(_,N).multiplyScalar(e.panSpeed),K(z.x,z.y),N.copy(_)}function Se(t){const o=X(t),a=t.pageX-o.x,s=t.pageY-o.y,d=Math.sqrt(a*a+s*s);H.set(0,d),I.set(0,Math.pow(H.y/F.y,e.zoomSpeed)),me(I.y),F.copy(H);const R=(t.pageX+o.x)*.5,g=(t.pageY+o.y)*.5;fe(R,g)}function at(t){e.enableZoom&&Se(t),e.enablePan&&De(t)}function it(t){e.enableZoom&&Se(t),e.enableRotate&&je(t)}function Ne(t){e.enabled!==!1&&(c.length===0&&(e.domElement.setPointerCapture(t.pointerId),e.domElement.addEventListener("pointermove",be),e.domElement.addEventListener("pointerup",Q)),!pt(t)&&(ut(t),t.pointerType==="touch"?Ye(t):st(t)))}function be(t){e.enabled!==!1&&(t.pointerType==="touch"?ct(t):rt(t))}function Q(t){switch(dt(t),c.length){case 0:e.domElement.releasePointerCapture(t.pointerId),e.domElement.removeEventListener("pointermove",be),e.domElement.removeEventListener("pointerup",Q),e.dispatchEvent(We),r=i.NONE;break;case 1:const o=c[0],a=B[o];Ye({pointerId:o,pageX:a.x,pageY:a.y});break}}function st(t){let o;switch(t.button){case 0:o=e.mouseButtons.LEFT;break;case 1:o=e.mouseButtons.MIDDLE;break;case 2:o=e.mouseButtons.RIGHT;break;default:o=-1}switch(o){case O.DOLLY:if(e.enableZoom===!1)return;qe(t),r=i.DOLLY;break;case O.ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(e.enablePan===!1)return;xe(t),r=i.PAN}else{if(e.enableRotate===!1)return;Me(t),r=i.ROTATE}break;case O.PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(e.enableRotate===!1)return;Me(t),r=i.ROTATE}else{if(e.enablePan===!1)return;xe(t),r=i.PAN}break;default:r=i.NONE}r!==i.NONE&&e.dispatchEvent(ye)}function rt(t){switch(r){case i.ROTATE:if(e.enableRotate===!1)return;Qe(t);break;case i.DOLLY:if(e.enableZoom===!1)return;Je(t);break;case i.PAN:if(e.enablePan===!1)return;$e(t);break}}function _e(t){e.enabled===!1||e.enableZoom===!1||r!==i.NONE||(t.preventDefault(),e.dispatchEvent(ye),et(lt(t)),e.dispatchEvent(We))}function lt(t){const o=t.deltaMode,a={clientX:t.clientX,clientY:t.clientY,deltaY:t.deltaY};switch(o){case 1:a.deltaY*=16;break;case 2:a.deltaY*=100;break}return t.ctrlKey&&!pe&&(a.deltaY*=10),a}function Ie(t){t.key==="Control"&&(pe=!0,e.domElement.getRootNode().addEventListener("keyup",Ce,{passive:!0,capture:!0}))}function Ce(t){t.key==="Control"&&(pe=!1,e.domElement.getRootNode().removeEventListener("keyup",Ce,{passive:!0,capture:!0}))}function ge(t){e.enabled===!1||e.enablePan===!1||tt(t)}function Ye(t){switch(Fe(t),c.length){case 1:switch(e.touches.ONE){case k.ROTATE:if(e.enableRotate===!1)return;Re(t),r=i.TOUCH_ROTATE;break;case k.PAN:if(e.enablePan===!1)return;ke(t),r=i.TOUCH_PAN;break;default:r=i.NONE}break;case 2:switch(e.touches.TWO){case k.DOLLY_PAN:if(e.enableZoom===!1&&e.enablePan===!1)return;ot(t),r=i.TOUCH_DOLLY_PAN;break;case k.DOLLY_ROTATE:if(e.enableZoom===!1&&e.enableRotate===!1)return;nt(t),r=i.TOUCH_DOLLY_ROTATE;break;default:r=i.NONE}break;default:r=i.NONE}r!==i.NONE&&e.dispatchEvent(ye)}function ct(t){switch(Fe(t),r){case i.TOUCH_ROTATE:if(e.enableRotate===!1)return;je(t),e.update();break;case i.TOUCH_PAN:if(e.enablePan===!1)return;De(t),e.update();break;case i.TOUCH_DOLLY_PAN:if(e.enableZoom===!1&&e.enablePan===!1)return;at(t),e.update();break;case i.TOUCH_DOLLY_ROTATE:if(e.enableZoom===!1&&e.enableRotate===!1)return;it(t),e.update();break;default:r=i.NONE}}function ze(t){e.enabled!==!1&&t.preventDefault()}function ut(t){c.push(t.pointerId)}function dt(t){delete B[t.pointerId];for(let o=0;o<c.length;o++)if(c[o]==t.pointerId){c.splice(o,1);return}}function pt(t){for(let o=0;o<c.length;o++)if(c[o]==t.pointerId)return!0;return!1}function Fe(t){let o=B[t.pointerId];o===void 0&&(o=new y,B[t.pointerId]=o),o.set(t.pageX,t.pageY)}function X(t){const o=t.pointerId===c[0]?c[1]:c[0];return B[o]}e.domElement.addEventListener("contextmenu",ze),e.domElement.addEventListener("pointerdown",Ne),e.domElement.addEventListener("pointercancel",Q),e.domElement.addEventListener("wheel",_e,{passive:!1}),e.domElement.getRootNode().addEventListener("keydown",Ie,{passive:!0,capture:!0}),this.update()}}console.log(yt);function te(l,p){return Math.floor(Math.random()*(p-l+1))+l}let V=new Et,u=new wt(75,window.innerWidth/window.innerHeight,.1,1e3);u.position.z=20;let v=new Tt;v.setSize(window.innerWidth,window.innerHeight);document.body.appendChild(v.domElement);let b=new jt(u,v.domElement);b.enableRotate=!1;b.mouseButtons={LEFT:O.PAN,MIDDLE:O.PAN,RIGHT:O.PAN};b.touches={ONE:k.PAN,TWO:k.DOLLY_PAN};let Ve=new kt,de=new Pt,U=0,Z=0,W=0,G=0,we=0,A=null,E=[];E.push(de.load("./page_2/smoke_0000.png",function(l){A!==null&&(A.material.map=E[0])}));E.push(de.load("./page_2/smoke_0001.png"));E.push(de.load("./page_2/smoke_0002.png"));E.push(de.load("./page_2/smoke_0003.png"));Ve.load("./page_2/page_2__scene.glb",function(l){let p=l.scene.children;for(let m=0;m<p.length;m++){let e=p[m];if(e.material!==void 0){let i=new Lt({side:Ot});i.transparent=!0,i.map=e.material.map,e.material=i}switch(e.name){case"mrs_riita":break;case"smoke":A=e,E[0]!==void 0&&(A.material.map=E[0]),A.scale.z*=-1;break;case"bounds":u.position.y=e.position.y,b.target.y=e.position.y,we=e.position.z+.2;break;case"riita_bars":e.material.transparent=!1;break;case"bound_left":U=e.position.x,console.log("b-left: "+U);break;case"bound_right":Z=e.position.x,console.log("b-right: "+Z);break;case"bound_top":W=e.position.y,console.log("b-top: "+W);break;case"bound_bottom":G=e.position.y,console.log("b-bottom: "+G);break}console.log(e)}console.log(l),V.add(l.scene)});let h=[],re=null,ve=100,ce=[-100,20],ue=[-5,50];Ve.load("./page_2/leaf.glb",function(l){re=l.scene.children[0],re.material.transparent=!0,console.log(re);let p=.005;for(let m=0;m<ve;m++){let e=re.clone(!0);e.position.x=te(ce[0],ce[1]),e.position.y=te(ue[0],ue[1]),e.position.z=3,e.scale.x=.1+p*(m%10),e.scale.y=.1+p*(m%10),e.scale.z=.1+p*(m%10),e.rotation.y=te(0,2*Math.PI),h.push(e),V.add(e)}});let Dt=new Mt(16777215,3);Dt.position.set(1,1,1).normalize();let St=new xt(16777215,3);V.add(St);function Nt(l){u.aspect=window.innerWidth/window.innerHeight,u.updateProjectionMatrix(),v.setSize(window.innerWidth,window.innerHeight)}function _t(l){}function It(l){}function Ct(l){}function Yt(l){}function zt(l){}let Ft=new Rt(!0),Ee=.75,le=0,ee=0;function Ht(){let l=Ft.getDelta();if(A!==null&&E.length!==0&&(le+=l,le>Ee)){for(ee++,ee>=E.length&&(ee=0);le>Ee;)le-=Ee;A.material.map!==E[ee]&&(A.material.map=E[ee])}if(h.length>0){let p=1,m=.5,e=.03,i=.01,r=.01,M=10;for(let n=0;n<ve;n++)h[n].position.x+=(p+e*(n%10))*l,h[n].position.y-=(m+i*(n%10))*l,h[n].rotation.y+=(r+r*(n%10))*l,h[n].position.x<U-M||h[n].position.y>W+M?V.remove(h[n]):V.add(h[n]),(h[n].position.x>Z+M||h[n].position.y<G-M)&&(h[n].position.x=te(ce[0],ce[1]),h[n].position.y=te(ue[0],ue[1]))}u.position.x<U&&(u.position.x=U,b.target.x=U,b.update()),u.position.x>Z&&(u.position.x=Z,b.target.x=Z,b.update()),u.position.y>W&&(u.position.y=W,b.target.y=W,b.update()),u.position.y<G&&(u.position.y=G,b.target.y=G,b.update()),u.position.z<we&&(u.position.z=we,b.update()),v.render(V,u)}window.addEventListener("resize",Nt);window.addEventListener("mousedown",It);window.addEventListener("mouseup",Ct);window.addEventListener("pointerdown",_t);window.addEventListener("touchstart",Yt);window.addEventListener("touchend",zt);v.setAnimationLoop(Ht);
