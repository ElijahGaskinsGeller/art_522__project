import{E as M,V as O,a as x,M as u,Q as g,T as y,S as j,P as T,W as R,C as S,R as q,B as A,b as D,c as H,d as z}from"./three.module-CZBp44lC.js";const c=new M(0,0,0,"YXZ"),a=new O,F={type:"change"},W={type:"lock"},X={type:"unlock"},b=Math.PI/2;class Y extends x{constructor(o,e){super(),this.camera=o,this.domElement=e,this.isLocked=!1,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.pointerSpeed=1,this._onMouseMove=I.bind(this),this._onPointerlockChange=Q.bind(this),this._onPointerlockError=V.bind(this),this.connect()}connect(){this.domElement.ownerDocument.addEventListener("mousemove",this._onMouseMove),this.domElement.ownerDocument.addEventListener("pointerlockchange",this._onPointerlockChange),this.domElement.ownerDocument.addEventListener("pointerlockerror",this._onPointerlockError)}disconnect(){this.domElement.ownerDocument.removeEventListener("mousemove",this._onMouseMove),this.domElement.ownerDocument.removeEventListener("pointerlockchange",this._onPointerlockChange),this.domElement.ownerDocument.removeEventListener("pointerlockerror",this._onPointerlockError)}dispose(){this.disconnect()}getObject(){return this.camera}getDirection(o){return o.set(0,0,-1).applyQuaternion(this.camera.quaternion)}moveForward(o){const e=this.camera;a.setFromMatrixColumn(e.matrix,0),a.crossVectors(e.up,a),e.position.addScaledVector(a,o)}moveRight(o){const e=this.camera;a.setFromMatrixColumn(e.matrix,0),e.position.addScaledVector(a,o)}lock(){this.domElement.requestPointerLock()}unlock(){this.domElement.ownerDocument.exitPointerLock()}}function I(n){if(this.isLocked===!1)return;const o=n.movementX||n.mozMovementX||n.webkitMovementX||0,e=n.movementY||n.mozMovementY||n.webkitMovementY||0,m=this.camera;c.setFromQuaternion(m.quaternion),c.y-=o*.002*this.pointerSpeed,c.x-=e*.002*this.pointerSpeed,c.x=Math.max(b-this.maxPolarAngle,Math.min(b-this.minPolarAngle,c.x)),m.quaternion.setFromEuler(c),this.dispatchEvent(F)}function Q(){this.domElement.ownerDocument.pointerLockElement===this.domElement?(this.dispatchEvent(W),this.isLocked=!0):(this.dispatchEvent(X),this.isLocked=!1)}function V(){console.error("THREE.PointerLockControls: Unable to use Pointer Lock API")}const B=new O(0,0,1),L=new M,U=new g,Z=new g(-Math.sqrt(.5),0,0,Math.sqrt(.5)),G={type:"change"};class $ extends x{constructor(o){super(),window.isSecureContext===!1&&console.error("THREE.DeviceOrientationControls: DeviceOrientationEvent is only available in secure contexts (https)");const e=this,m=1e-6,k=new g;this.object=o,this.object.rotation.reorder("YXZ"),this.enabled=!0,this.deviceOrientation={},this.screenOrientation=0,this.alphaOffset=0;const w=function(t){e.deviceOrientation=t},h=function(){e.screenOrientation=window.orientation||0},C=function(t,v,E,p,f){L.set(E,v,-p,"YXZ"),t.setFromEuler(L),t.multiply(Z),t.multiply(U.setFromAxisAngle(B,-f))};this.connect=function(){h(),window.DeviceOrientationEvent!==void 0&&typeof window.DeviceOrientationEvent.requestPermission=="function"?window.DeviceOrientationEvent.requestPermission().then(function(t){t=="granted"&&(window.addEventListener("orientationchange",h),window.addEventListener("deviceorientation",w))}).catch(function(t){console.error("THREE.DeviceOrientationControls: Unable to use DeviceOrientation API:",t)}):(window.addEventListener("orientationchange",h),window.addEventListener("deviceorientation",w)),e.enabled=!0},this.disconnect=function(){window.removeEventListener("orientationchange",h),window.removeEventListener("deviceorientation",w),e.enabled=!1},this.update=function(){if(e.enabled===!1)return;const t=e.deviceOrientation;if(t){const v=t.alpha?u.degToRad(t.alpha)+e.alphaOffset:0,E=t.beta?u.degToRad(t.beta):0,p=t.gamma?u.degToRad(t.gamma):0,f=e.screenOrientation?u.degToRad(e.screenOrientation):0;C(e.object.quaternion,v,E,p,f),8*(1-k.dot(e.object.quaternion))>m&&(k.copy(e.object.quaternion),e.dispatchEvent(G))}},this.dispose=function(){e.disconnect()},this.connect()}}console.log(y);let _=new j,i=new T(75,window.innerWidth/window.innerHeight,.1,1e3);i.position.z=5;let s=new R;s.setSize(window.innerWidth,window.innerHeight);document.body.appendChild(s.domElement);let d="scene_";new S().setPath("./page_1/").load([d+"left.jpg",d+"right.jpg",d+"top.jpg",d+"bottom.jpg",d+"back.jpg",d+"front.jpg"],function(n){s.initTexture(n),_.background=n});let J=new q,K=new A(1,1,1),N=new D({color:65280}),ee=new H(K,N),ne=new D({color:16776960}),r=new Y(i,s.domElement),l=null;console.log(r);let P=!1;function te(n){console.log(n),!P&&n.alpha!==null&&n.beta!==null&&n.gamma!==null&&(ee.material=ne,P=!0,r.disconnect(),r.dispose(),l=new $(i))}function oe(n){i.aspect=window.innerWidth/window.innerHeight,i.updateProjectionMatrix(),s.setSize(window.innerWidth,window.innerHeight)}function ie(n){let o=new z;o.x=event.clientX/window.innerWidth*2-1,o.y=-(event.clientY/window.innerHeight)*2+1,J.setFromCamera(o,i)}function re(n){n.target!==document.getElementById("p1-next")&&r.lock()}function se(n){l===null&&r.unlock()}function ce(n){n.target!==document.getElementById("p1-next")&&l===null&&r.lock()}function ae(n){l===null&&r.unlock()}function de(){l!==null&&l.update(),s.render(_,i)}window.addEventListener("resize",oe);window.addEventListener("deviceorientation",te);window.addEventListener("mousedown",re);window.addEventListener("mouseup",se);window.addEventListener("pointerdown",ie);window.addEventListener("touchstart",ce);window.addEventListener("touchend",ae);s.setAnimationLoop(de);
