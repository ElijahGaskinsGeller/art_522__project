import{T as L,S as M,n as W,O as S,W as z,b as g,k,d as E,m as T}from"./three.module-CvTIG-M_.js";import{G as C}from"./GLTFLoader-DeYvS692.js";function P(e,n,i){return(1-i)*e+i*n}function G(e,n,i){return(i-e)/(n-e)}function R(e,n,i){return Math.min(Math.max(e,n),i)}function F(){return Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)}function B(){return window.scrollY/(F()-window.innerHeight)}function O(e,n,i,a,t=0,p=0){let H=a.position.y+window.innerHeight/2,y=e.max.z*(n.y+t)+i.y+p,x=e.min.z*(n.y+t)+i.y+p-window.innerHeight;return G(y,x,H)}console.log(L);let h=new M;h.background=new W(1,1,1);let o=new S(window.innerWidth/-2,window.innerWidth/2,window.innerHeight/2,window.innerHeight/-2,.1,1e3);o.position.z=5;let _=0,f=0,c=new z;c.setSize(window.innerWidth,window.innerHeight);document.body.appendChild(c.domElement);let j=new C,u=null,l=[],w=1,s=0,b=0,r=null,d=[];j.load("./page_3/page_3_layout.glb",function(e){let n=e.scene.children;for(let a=0;a<n.length;a++){let t=n[a];if(console.log(t),t.material!==void 0){let p=new g({map:t.material.map});t.material=p}switch(t.name){case"start":_=t.position.y;break;case"bubble_0":u=t,u.scale.z*=-1,l[0]!==void 0&&(u.material.map=l[0]);break;case"panel_0":r=t,r.scale.z*=-1,d[0]!==void 0&&(r.material.map=d[0]);break;case"end":f=t.position.y;break}}let i=new g({color:65280});e.scene.children[0].material=i,h.add(e.scene)});let m=new k;l.push(m.load("page_3/bubble_0/bubble_0_0000.png",function(e){}));l.push(m.load("page_3/bubble_0/bubble_0_0001.png",function(e){}));l.push(m.load("page_3/bubble_0/bubble_0_0002.png",function(e){}));l.push(m.load("page_3/bubble_0/bubble_0_0003.png",function(e){}));for(let e=0;e<=16;e++)d.push(m.load("page_3/panel_0/panel_0_00"+(e>9?e:"0"+e)+".png",function(n){n.colorSpace=E,c.initTexture(n),console.log(n)}));function v(e){console.log("here"),o.left=window.innerWidth/-2,o.right=window.innerWidth/2,o.top=window.innerHeight/2,o.bottom=window.innerHeight/-2,o.aspect=window.innerWidth/window.innerHeight,o.updateProjectionMatrix(),c.setSize(window.innerWidth,window.innerHeight)}let A=new T(!0);function D(){let e=A.getDelta(),n=B(),i=P(_,f,n);if(o.position.y=i,u!==null&&l.length!==0&&(s+=e,s>w)){for(b++,b>=l.length&&(b=0);s>w;)s-=w;u.material.map=l[b]}if(r!==null&&d.length!==0){let a=O(r.geometry.boundingBox,r.scale,r.position,o,-600,800),t=R(Math.round(a*d.length),0,d.length-1);r.material.map=d[t]}c.render(h,o)}window.addEventListener("resize",v);c.setAnimationLoop(D);
