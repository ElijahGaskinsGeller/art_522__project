import{E as F,V as P,a as Q,M as L,Q as I,T as V,S as G,P as U,W as Z,I as $,R as J,B as K,b as N,c as ee,C as D,d as te,e as z}from"./three.module-CvTIG-M_.js";const E=new F(0,0,0,"YXZ"),b=new P,ne={type:"change"},oe={type:"lock"},ie={type:"unlock"},W=Math.PI/2;class re extends Q{constructor(n,t){super(),this.camera=n,this.domElement=t,this.isLocked=!1,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.pointerSpeed=1,this._onMouseMove=se.bind(this),this._onPointerlockChange=ae.bind(this),this._onPointerlockError=ce.bind(this),this.connect()}connect(){this.domElement.ownerDocument.addEventListener("mousemove",this._onMouseMove),this.domElement.ownerDocument.addEventListener("pointerlockchange",this._onPointerlockChange),this.domElement.ownerDocument.addEventListener("pointerlockerror",this._onPointerlockError)}disconnect(){this.domElement.ownerDocument.removeEventListener("mousemove",this._onMouseMove),this.domElement.ownerDocument.removeEventListener("pointerlockchange",this._onPointerlockChange),this.domElement.ownerDocument.removeEventListener("pointerlockerror",this._onPointerlockError)}dispose(){this.disconnect()}getObject(){return this.camera}getDirection(n){return n.set(0,0,-1).applyQuaternion(this.camera.quaternion)}moveForward(n){const t=this.camera;b.setFromMatrixColumn(t.matrix,0),b.crossVectors(t.up,b),t.position.addScaledVector(b,n)}moveRight(n){const t=this.camera;b.setFromMatrixColumn(t.matrix,0),t.position.addScaledVector(b,n)}lock(){this.domElement.requestPointerLock()}unlock(){this.domElement.ownerDocument.exitPointerLock()}}function se(e){if(this.isLocked===!1)return;const n=e.movementX||e.mozMovementX||e.webkitMovementX||0,t=e.movementY||e.mozMovementY||e.webkitMovementY||0,c=this.camera;E.setFromQuaternion(c.quaternion),E.y-=n*.002*this.pointerSpeed,E.x-=t*.002*this.pointerSpeed,E.x=Math.max(W-this.maxPolarAngle,Math.min(W-this.minPolarAngle,E.x)),c.quaternion.setFromEuler(E),this.dispatchEvent(ne)}function ae(){this.domElement.ownerDocument.pointerLockElement===this.domElement?(this.dispatchEvent(oe),this.isLocked=!0):(this.dispatchEvent(ie),this.isLocked=!1)}function ce(){console.error("THREE.PointerLockControls: Unable to use Pointer Lock API")}const le=new P(0,0,1),X=new F,de=new I,ue=new I(-Math.sqrt(.5),0,0,Math.sqrt(.5)),me={type:"change"};class he extends Q{constructor(n){super(),window.isSecureContext===!1&&console.error("THREE.DeviceOrientationControls: DeviceOrientationEvent is only available in secure contexts (https)");const t=this,c=1e-6,w=new I;this.object=n,this.object.rotation.reorder("YXZ"),this.enabled=!0,this.deviceOrientation={},this.screenOrientation=0,this.alphaOffset=0;const x=function(o){t.deviceOrientation=o},f=function(){t.screenOrientation=window.orientation||0},r=function(o,M,T,y,C){X.set(T,M,-y,"YXZ"),o.setFromEuler(X),o.multiply(ue),o.multiply(de.setFromAxisAngle(le,-C))};this.connect=function(){f(),window.DeviceOrientationEvent!==void 0&&typeof window.DeviceOrientationEvent.requestPermission=="function"?window.DeviceOrientationEvent.requestPermission().then(function(o){o=="granted"&&(window.addEventListener("orientationchange",f),window.addEventListener("deviceorientation",x))}).catch(function(o){console.error("THREE.DeviceOrientationControls: Unable to use DeviceOrientation API:",o)}):(window.addEventListener("orientationchange",f),window.addEventListener("deviceorientation",x)),t.enabled=!0},this.disconnect=function(){window.removeEventListener("orientationchange",f),window.removeEventListener("deviceorientation",x),t.enabled=!1},this.update=function(){if(t.enabled===!1)return;const o=t.deviceOrientation;if(o){const M=o.alpha?L.degToRad(o.alpha)+t.alphaOffset:0,T=o.beta?L.degToRad(o.beta):0,y=o.gamma?L.degToRad(o.gamma):0,C=t.screenOrientation?L.degToRad(t.screenOrientation):0;r(t.object.quaternion,M,T,y,C),8*(1-w.dot(t.object.quaternion))>c&&(w.copy(t.object.quaternion),t.dispatchEvent(me))}},this.dispose=function(){t.disconnect()},this.connect()}}console.log(V);let g=new G,l=new U(75,window.innerWidth/window.innerHeight,.1,1e3);l.position.z=5;let v=new Z;v.setSize(window.innerWidth,window.innerHeight);document.body.appendChild(v.domElement);let d="./page_1/scene_",i=[],a=0;function u(){console.log("here"),i[0]=new D([we,R,q,A,S,j]),i[1]=new D([fe,R,q,A,S,j]),i[2]=new D([ge,R,q,A,S,j]);for(let e=0;e<i.length;e++)i[e].needsUpdate=!0,i[e].colorSpace=te,v.initTexture(i[e]);g.background=i[0],console.log(g.background)}let m=new $,h=8,s=0,j=m.load(d+"front.jpg",function(e){s++,s==h&&u()}),S=m.load(d+"back.jpg",function(e){s++,s==h&&u()}),we=m.load(d+"left_0.jpg",function(e){s++,s==h&&u()}),fe=m.load(d+"left_1.jpg",function(e){s++,s==h&&u()}),ge=m.load(d+"left_2.jpg",function(e){s++,s==h&&u()}),R=m.load(d+"right.jpg",function(e){s++,s==h&&u()}),q=m.load(d+"top.jpg",function(e){s++,s==h&&u()}),A=m.load(d+"bottom.jpg",function(e){s++,s==h&&u()}),Y=new J,pe=new K(1.3,1.3,1.3),H=new N({transparent:!0,opacity:0});H.transparent=!0;H.opacity=0;let _=new ee(pe,H);g.add(_);_.position.x=-3;_.position.z=4.7;let p=new re(l,v.domElement),k=null;console.log(p);let B=!1;function ve(e){console.log(e),!B&&e.alpha!==null&&e.beta!==null&&e.gamma!==null&&(B=!0,p.disconnect(),p.dispose(),k=new he(l))}function Ee(e){l.aspect=window.innerWidth/window.innerHeight,l.updateProjectionMatrix(),v.setSize(window.innerWidth,window.innerHeight)}function be(e){let n=new z;n.x=e.clientX/window.innerWidth*2-1,n.y=-(e.clientY/window.innerHeight)*2+1,Y.setFromCamera(n,l);let t=Y.intersectObject(_);t.length>0&&(console.log(t[0]),i.length>0&&(console.log("here"),a++,a>=i.length&&(a=0),g.background=i[a]))}function ke(e){e.target!==document.getElementById("p1-next")&&p.lock()}function xe(e){k===null&&p.unlock()}function Le(e){e.target!==document.getElementById("p1-next")&&k===null&&p.lock()}function Oe(e){k===null&&p.unlock()}let O=[];function Pe(){if(k!==null)k.update();else{let e=navigator.getGamepads();for(let n=0;n<e.length;n++){let t=e[n];if(t!==null){let c=t.axes[0],w=-t.axes[1],x=new z(c,w),f=new z(c,w).normalize().multiplyScalar(x.length());c*c>.05&&l.rotateOnWorldAxis(new P(0,1,0),f.x*-.01),w*w>.05&&l.rotateOnAxis(new P(1,0,0),f.y*.01);for(let r=0;r<t.buttons.length;r++)if(t.buttons[r].pressed&&console.log(r),O[r]!==void 0&&O[r]&&O[r]!==t.buttons[r].pressed)switch(r){case 14:i.length>0&&(a--,a<0&&(a=i.length-1),g.background=i[a]);break;case 15:i.length>0&&(a++,a>=i.length&&(a=0),g.background=i[a]);break}t.buttons[5].pressed&&(window.location.href="page_2.html");for(let r=0;r<t.buttons.length;r++)O[r]=t.buttons[r].pressed}}}v.render(g,l)}window.addEventListener("resize",Ee);window.addEventListener("deviceorientation",ve);window.addEventListener("mousedown",ke);window.addEventListener("mouseup",xe);window.addEventListener("pointerdown",be);window.addEventListener("touchstart",Le);window.addEventListener("touchend",Oe);v.setAnimationLoop(Pe);
